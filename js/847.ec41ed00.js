"use strict";(self["webpackChunkezmail"]=self["webpackChunkezmail"]||[]).push([[847],{6015:function(t,a,e){e.r(a),e.d(a,{default:function(){return k}});var i=e(6190),s=e(9582),o=e(4886),r=e(5125),n=e(9258),l=e(7808),u=e(7678);const d=(0,u.Z)(l.Z);var h=d.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...l.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var a;t?this.calculateInputHeight():null===(a=this.$refs.input)||void 0===a||a.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const a=t.scrollHeight,e=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(e,a)+"px"},genInput(){const t=l.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){l.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}}),c=function(){var t=this,a=t._self._c;return a("div",[a(n.Z,{attrs:{transition:"scale-transition",timeout:t.snackbarTimeout},scopedSlots:t._u([{key:"action",fn:function({attrs:e}){return[a(i.Z,t._b({attrs:{color:"blue",text:""},on:{click:function(a){t.snackbar=!1}}},"v-btn",e,!1),[t._v(" Fechar ")])]}}]),model:{value:t.snackbar,callback:function(a){t.snackbar=a},expression:"snackbar"}},[t._v(" "+t._s(t.textoSnackbar)+" ")]),a(s.Z,{staticClass:"ma-2 slide",attrs:{height:"465px"}},[a(o.EB,{staticClass:"py-3 fade"},[a("h4",[t._v("Novo email")])]),a(o.ZB,{staticClass:"fade"},[a(r.Z,{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(a){t.valid=a},expression:"valid"}},[a(l.Z,{attrs:{rules:t.emailRules,prefix:"Para: ",loading:t.loading,disabled:t.loading,dense:"","single-line":"",required:"",autofocus:""},model:{value:t.destinatario,callback:function(a){t.destinatario=a},expression:"destinatario"}}),a(l.Z,{attrs:{rules:t.assuntoRules,label:"Assunto",loading:t.loading,disabled:t.loading,dense:"","single-line":"",required:""},model:{value:t.assunto,callback:function(a){t.assunto=a},expression:"assunto"}}),a(h,{staticClass:"mt-4",attrs:{label:"Email",loading:t.loading,disabled:t.loading,counter:"","no-resize":"",dense:"",rows:"7",hint:"Escreva aqui o seu email"},model:{value:t.texto,callback:function(a){t.texto=a},expression:"texto"}})],1)],1),a(o.h7,{staticClass:"fade"},[a(i.Z,{attrs:{dark:"",color:"blue",loading:t.loading},on:{click:t.enviarEmail}},[t._v("Enviar")])],1)],1)],1)},p=[],m=e(1110),g=e(9007),v={data(){return{valid:!1,snackbar:!1,textoSnackbar:"",snackbarTimeout:5e3,loading:!1,email:new g.Z,texto:"",destinatario:"",assunto:"",emailRules:[t=>!!t||"Campo obrigatório",t=>/.+@.+\..+/.test(t)||"E-mail inválido"],assuntoRules:[t=>!!t||"Campo obrigatório"]}},async beforeMount(){},methods:{async enviarEmail(){if(this.loading=!0,this.$refs.form.validate(),!this.$refs.form.value)return this.textoSnackbar="Preencha corretamente",this.snackbar=!0,void(this.loading=!1);const t=new g.Z({endereco:this.destinatario,assunto:this.assunto,corpoEmail:this.texto,data:new Date});await m.Z.cadastrar(t).then((t=>{console.log(t),this.textoSnackbar="Email enviado com sucesso"})).catch((t=>{this.textoSnackbar=t.message})),this.limparCampos(),this.loading=!1,this.snackbar=!0},limparCampos(){this.destinatario="",this.assunto="",this.texto=""}}},f=v,b=e(1001),w=(0,b.Z)(f,c,p,!1,null,"20263466",null),k=w.exports},5125:function(t,a,e){e(7658);var i=e(7678),s=e(2500),o=e(4712);a["Z"]=(0,i.Z)(s.Z,(0,o.J)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const a=Object.values(t).includes(!0);this.$emit("input",!a)},deep:!0,immediate:!0}},methods:{watchInput(t){const a=t=>t.$watch("hasError",(a=>{this.$set(this.errorBag,t._uid,a)}),{immediate:!0}),e={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?e.shouldValidate=t.$watch("shouldValidate",(i=>{i&&(this.errorBag.hasOwnProperty(t._uid)||(e.valid=a(t)))})):e.valid=a(t),e},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const a=this.inputs.find((a=>a._uid===t._uid));if(!a)return;const e=this.watchers.find((t=>t._uid===a._uid));e&&(e.valid(),e.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==a._uid)),this.inputs=this.inputs.filter((t=>t._uid!==a._uid)),this.$delete(this.errorBag,a._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},this.$slots.default)}})}}]);
//# sourceMappingURL=847.ec41ed00.js.map